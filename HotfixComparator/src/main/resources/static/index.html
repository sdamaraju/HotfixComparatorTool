<!-- Author : Kakul--> 

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Hotfix Comparator</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  
<script>

function myFunction() {
var path1 = document.getElementById('path1').value;
//path1= path1.replace(/\\/g,"*");
var path2= document.getElementById('path2').value;
//path2= path2.replace(/\\/g,"*");
var ItemJSON;
ItemJSON = 
{ 
  "path1":path1,
  "path2":path2 
};
//console.log(JSON.stringify(ItemJSON));
var ItemJSONFinal=JSON.stringify(ItemJSON);
//var URL= "http://localhost:8080/jsonitem?var="+ItemJSON;

jQuery.ajax({
            url: "http://localhost:7008/compareHotfixes",
            type: "POST",
            data: ItemJSONFinal,
          

            contentType: 'application/json; charset=utf-8',
            success: function(resultData) {
             resultData=resultData.replace(/\n/g,"<br><br>");
            // resultData=resultData.replace(/\"/g," ");
             document.getElementById("demo").innerHTML = JSON.stringify(resultData) ;


            },
            error : function(jqXHR, textStatus, errorThrown) {
              document.getElementById("demo").innerHTML =errorThrown;         
                 },

            timeout: 120000,
        });
//+path1+"/"+path2+"/";
 //var xhttp = new XMLHttpRequest();
 //xmlhttp.onreadystatechange = function() {
   // if (this.readyState == 4 && this.status == 200) {
     //   var myObj = this.responseText;
       // document.getElementById("demo").innerHTML = myObj.name;
    //}
//};
 //xhttp.open("GET", URL, true);
 //xhttp.setRequestHeader("Content-type", "application/json");
 //xhttp.send(ItemJSON);
 //var response = JSON.parse(xhttp.responseText);
 //xhttp.responseText ="The HFix in path1 and not in path 2 are \n HFix-1234...\n..... The HFix present in both env are \n HFix-1245, HFix-12345"
//;//var obj= JSON.parse(ItemJSON);

// rest call with param path1 and path 2 ;
//var result =  + " The HFix in path1 and not in path 2 are \n HFix-1234...\n..... The HFix present in both env are \n HFix-1245, HFix-12345";
//var htmlObj= $(result);
  //  document.getElementById("demo").innerHTML = resultData ;
}
</script>
</head>
<body style="background: rgb(66, 115, 131);">

<div class="jumbotron text-center">
  <h1>Hotfix Comparator</h1>
  <p>Upload the Hotfix inventory CSV files</p> 
</div>
  
<div class="container"">
  <div class="row">
    <div class="col-sm-6">
      <div class="center-block" style="margin-left:25%"> 
       <h3 style="color:white">Inventory 1</h3>
       <input type="file" id="path1" ><br>
      </div>
    </div>
    <div class="col-sm-6" >
      <div class="center-block" style="margin-left:25%">
        <h3 style="color:white">Inventory 2</h3>
        <input type="file" id="path2" ><br>
      </div>
   </div>
  </div>
</div>

<div style="height:50px">
    <button type="Submit" class="btn btn-success"  onclick="myFunction()" style="margin-left:auto;margin-right:auto;display:block;margin-top:100px;" >Compare</button>
	<div >
<div id="demo" style="white-space: pre-line; text-align:left;margin-top:50px;color: aliceblue">
          

        </div>
</body>
</html>
